<!DOCTYPE html>

<html>
<head>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" 
integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" 
crossorigin="anonymous">
</script>

</head>
<body>
<h2> Serialized Data: </h2>
<div id="part2">  </div>
<h2> Data in Table: </h2>
<div id="part4">  </div>
<div id="part3">  </div>

<script language="javascript">
    $.get("https://erikahowell.github.io/json-songlist/songlist.json",
	function(data) {
		// part 2: serialize data
		json_str = JSON.stringify(data);
		document.getElementById("part2").innerHTML = json_str;
        // part 3: put data in table
        songlist = "";
        data.forEach(function(song) {
            songlist += "<br>" + song.title + "<br>";
            songlist += "Artist: " + song.artist + "<br>";
            songlist += "Genre: " + song.genre + "<br>";
            songlist += "Released: " + song.year + "<br>";
        });
        document.getElementById("part3").innerHTML = songlist;
        // part 4: filter the data
        let arr = [];
        data.forEach(function(song) {
            if (arr.indexOf(song.genre) == -1) {
                arr.push(song.genre);
            }
        });
        var t = "<form> <select id='genreFilter' name='Genre' size='1'>";
        arr.forEach(function(genre) {
            t += "<option>" + genre + "</option>";
        });
        t += "</select> <button id='button' type='button'> Filter </button>";
        t += "</form>";
        document.getElementById("part4").innerHTML = t;
        $("#button").click(function() {
            filterlist = "";
            var select = document.getElementById("genreFilter").value;
            data.forEach(function(song) {
                if (song.genre == select) {
                    filterlist += "<br>" + song.title + "<br>";
                    filterlist += "Artist: " + song.artist + "<br>";
                    filterlist += "Genre: " + song.genre + "<br>";
                    filterlist += "Released: " + song.year + "<br>";
                }
            });
            document.getElementById("part3").innerHTML = filterlist;
        });
    });
</script>
</body>
</html>